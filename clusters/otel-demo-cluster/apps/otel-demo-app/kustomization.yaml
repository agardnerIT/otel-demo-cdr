apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
metadata:
  name: my-otel-demo
  namespace: otel-demo
resources:
  - helmsource.yaml
  - helmrelease.yaml
  - namespace.yaml
patches:
  - patch: |-
      apiVersion: apps/v1
      kind: Deployment
      metadata:
        name: my-otel-demo-adservice
        namespace: otel-demo
      spec:
        template:
          metadata:
            labels:
              owner: foo
          spec:
            containers:
            - name: adservice
              env:
                - name: "owner"
                  value: "foo"
    target:
      kind: Deployment
      labelSelector: app.kubernetes.io/component=adservice